@{
    Layout = "Admin/_Layout";
    ViewData["Title"] = "Dashboard Pizzeria";
}
@model List<Pizza>

<h1 class="fw-bold text-danger">Dashboard Pizzeria</h1>
<div class="d-flex justify-content-between align-items-center mt-5 mb-1 ps-2 pe-4">
    <h2>Elenco Pizze</h2>
    <a class="text-decoration-none" href="@Url.Action("Create", "Pizza")"><i class="fa-solid fa-plus aggiungi"></i></a>
</div>
@if(Model.Count > 0)
{
    <div class="container-fluid elenco">
        <ul class="list-unstyled row mb-5 g-2 row-cols-5">
            @foreach(Pizza pizza in Model)
            {
                <li>
                    <a class="card text-center" href="@(Url.Action("Detail","Pizza", new { id = pizza.Id }))">
                        <div id="id-pizza">
                            @pizza.Id
                        </div>
                        <img alt="Immagine pizza" src="@pizza.Image" class="img-fluid img-card" />
                        <h3 class="my-2 fw-bold">@pizza.Name</h3>
                        <p class="desc">@pizza.Description</p>
                        <q class="my-2">@pizza.Price €</q>
                    </a>
                    <div class="d-flex justify-content-between align-items-center gap-2 mx-2 pb-3 mt-1">
                        <a class="w-50 btn btn-warning text-decoration-none d-block" href="@Url.Action("Update", "Pizza", new { id = pizza.Id} )"><i class="fa-solid fa-pen-to-square text-light fs-5"></i></a>
                        <button type="button" class="w-50 btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete-@(pizza.Id)">
                            <i class="fa-solid fa-trash text-light fs-5"></i>
                        </button>
                    </div>
                    <hr>
                </li>

                <div class="modal fade" id="delete-@(pizza.Id)" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Conferma Eliminazione</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                Conferma di voler cancellare la pizza @pizza.Id : @pizza.Name?
                            </div>
                            <div class="modal-footer">
                                <form asp-action="Delete" asp-controller="Pizza" asp-route-id="@pizza.Id" method="post">
                                    @Html.AntiForgeryToken()
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                                    <button type="submit" class="btn btn-danger">Cancella</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </ul>
    </div>
}
else
{
    <div class="alert alert-danger mt-4 text-center " role="alert">
        Nessuna pizza presente, inserire una nuova pizza attraverso il pulsante con il +!
    </div>
}


